(this["webpackJsonpecoled-collage"]=this["webpackJsonpecoled-collage"]||[]).push([[0],{132:function(e,t,n){"use strict";n.r(t);var i,a=n(1),o=n.n(a),l=n(54),r=n.n(l),c=(n(72),n(24)),d=n(38),s=n(13),h=n(9),u=n(55),p=n.n(u),g=n(20),m=n(30),w=n(25),f=n.n(w),b=n(31),y=n(143),v=n(56),x=n(57),j=n.n(x),E=n(58),C=n.n(E),O=n(59),U=n.n(O),S=n(32);function B(){var e=Object(c.a)(["\n      query query {\n        shop {\n          name\n        }\n      }\n    "]);return B=function(){return e},e}function A(){var e=Object(c.a)(['\n      query query {\n        node(id: "','") {\n          ... on Product {\n            onlineStoreUrl\n            images(first: 100) {\n              edges {\n                node {\n                  originalSrc\n                  altText\n                }\n              }\n            }\n          }\n        }\n      }\n    ']);return A=function(){return e},e}function R(){var e=Object(c.a)(["\n      query query {\n        shop {\n          name\n        }\n      }\n    "]);return R=function(){return e},e}function I(){var e=Object(c.a)(['\n      query query {\n        node(id: "','") {\n          ... on ProductVariant {\n            id\n            product{\n              id\n            }\n          }\n        }\n      }\n    ']);return I=function(){return e},e}var k=Object(y.a)((i={outerContainer:{height:"100vh",display:"flex"},stageContainerAfterUpload:{width:"100%",alignContent:"center",alignItems:"center"},mobileViewBeforeUpload:{width:"100%",alignContent:"center",alignItems:"center"},buttonContainerAfterUpload:{width:"100%",position:"absolute",bottom:0,display:"flex",justifyContent:"space-evenly"},buttonContainerAfterUploadMobile:{height:"70px",width:"100%",position:"absolute",bottom:0,display:"flex",alignItems:"center",justifyContent:"space-evenly"},mobileViewAfterUpload:{height:"70px",width:"100%",position:"absolute",bottom:0,display:"flex",alignItems:"center",justifyContent:"space-evenly"}},Object(h.a)(i,"buttonContainerAfterUpload",{width:"100%",position:"absolute",bottom:0,display:"flex",justifyContent:"space-evenly"}),Object(h.a)(i,"browserViewAfterUpload",{width:"100%",position:"absolute",bottom:0,display:"flex",justifyContent:"space-evenly"}),Object(h.a)(i,"buttonContainerBeforeUpload",{width:"100%"}),Object(h.a)(i,"singleButtonContainerBeforeUpload",{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}),Object(h.a)(i,"browserViewBeforeUpload",{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}),Object(h.a)(i,"singleButtonContainerAfterUpload",{width:"48%",display:"flex",justifyContent:"center",alignItems:"center"}),Object(h.a)(i,"singleButtonContainerAfterUploadMobile",{width:"50%",display:"flex",justifyContent:"center",alignItems:"center"}),Object(h.a)(i,"buttonAfterUpload",{background:"#252a2b",fontFamily:"sans-serif",fontStyle:"normal",color:"white",border:"2px solid transparent",fontWeight:700,textTransform:"uppercase",cursor:"pointer",borderRadius:0,padding:"15px 30px",textAlign:"center",width:"100%",alignSelf:"stretch"}),Object(h.a)(i,"buttonBeforeUpload",{background:"#252a2b",fontFamily:"sans-serif",fontStyle:"normal",color:"white",border:"2px solid transparent",fontWeight:700,textTransform:"uppercase",cursor:"pointer",borderRadius:0,padding:"15px 30px",width:"50%",display:"flex",alignSelf:"center",justifyContent:"center"}),Object(h.a)(i,"hidden",{visibility:"hidden"}),Object(h.a)(i,"backButton",{dispay:"flex",position:"absolute"}),i)),P=function(e){var t,n,i=e.backgroundImage,a=e.data,l=e.shapeProps,r=e.isSelected,c=e.onSelect,h=e.onChange,u=o.a.useState(null),m=Object(s.a)(u,2),w=m[0],f=m[1];a&&a.node&&a.node.images&&0!==a.node.images.edges.length&&null===w&&a.node.images.edges.forEach((function(e){"collage"===e.node.altText&&f(e.node.originalSrc)}));var b=p()(w,"Anonymous"),y=Object(s.a)(b,1)[0];if(y&&l&&null===l.height&&null===l.width){var v=y.width/y.height;i&&(n=(t=i.height>i.width&&window.innerHeight>window.innerWidth?window.innerHeight/4:i.height>i.width&&window.innerHeight<window.innerWidth?window.innerHeight/3:i.height<i.width&&window.innerHeight>window.innerWidth?window.innerHeight/6:window.innerHeight/3)*v,l.width=n,l.height=t)}var x=o.a.useRef(),j=o.a.useRef();return o.a.useEffect((function(){r&&(j.current.setNode(x.current),j.current.getLayer().batchDraw())}),[r]),o.a.createElement(o.a.Fragment,null,o.a.createElement(g.Image,Object.assign({crossOrigin:"anonymous",fill:"",image:y,onTap:c,onClick:c,ref:x},l,{draggable:!0,onDragEnd:function(e){h(Object(d.a)({},l,{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var t=x.current,n=t.scaleX(),i=t.scaleY();t.scaleX(1),t.scaleY(1),h(Object(d.a)({},l,{x:t.x(),y:t.y(),width:Math.max(5,t.width()*n),height:Math.max(t.height()*i)}))}})),r&&o.a.createElement(g.Transformer,{enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],ref:j,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}}))},H=function(){var e,t,n,i=window.location.search,a=new URLSearchParams(i).get("product_variant_id");if(a){var l=btoa("gid://shopify/ProductVariant/"+a);t=f()(I(),l)}else t=f()(R());var r=Object(m.a)(t).data;r&&r.node&&(e=r.node.product.id),n=e?f()(A(),e):f()(B());var c=k(),d=Object(m.a)(n).data,h=o.a.createRef(),u=new Image,p=o.a.useState(null),w=Object(s.a)(p,2),y=w[0],x=w[1],E=o.a.useState(null),O=Object(s.a)(E,2),H=O[0],N=O[1],V=o.a.useState(!0),W=Object(s.a)(V,2),T=W[0],q=W[1],M=o.a.useState(!1),F=Object(s.a)(M,2),L=F[0],D=F[1],X=o.a.useState(window.innerWidth),J=Object(s.a)(X,2),Q=J[0],Y=J[1],_=o.a.useState(window.innerHeight),$=Object(s.a)(_,2),z=$[0],G=$[1],K=o.a.useState(null),Z=Object(s.a)(K,2),ee=Z[0],te=Z[1],ne=o.a.useState(null),ie=Object(s.a)(ne,2),ae=ie[0],oe=ie[1],le=o.a.useState(null),re=Object(s.a)(le,2),ce=re[0],de=re[1],se=o.a.useState(null),he=Object(s.a)(se,2),ue=he[0],pe=he[1],ge=o.a.useState(null),me=Object(s.a)(ge,2),we=me[0],fe=me[1];function be(){!0===window.matchMedia("(orientation: portrait)").matches?oe("landscape"):oe("portrait");var e=window.innerWidth,t=window.innerHeight;if(y){var n,i,a=b.scale(y,{maxWidth:e,maxHeight:t,downsamplingRatio:.2,pixelRatio:window.devicePixelRatio,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",canvas:!0});N(a),pe(parseInt(a.style.width,10)),fe(parseInt(a.style.height,10)),a.width/window.devicePixelRatio<e&&(n=(e-a.width/window.devicePixelRatio)/2),a.height/window.devicePixelRatio<t&&(i=(t-a.height/window.devicePixelRatio)/2),de({x:n,y:i}),te({x:n,y:i,width:null,height:null})}G(t),Y(e)}o.a.useEffect((function(){window.onorientationchange=function(){this.setTimeout((function(){window.innerHeight!==z&&be()}),400)}}),[y,u]);var ye=!1;null!==y&&(ye=!0),o.a.useEffect((function(){if(!T&&L){var e=h.current.toDataURL({pixelRatio:window.devicePixelRatio,mimeType:"image/png"});Object(v.saveAs)(e,"collage.png"),D(!1)}}),[L]);var ve=function(e){var t=Object(s.a)(e.target.files,1)[0];t&&b(t,(function(e){var t=b.scale(e,{maxWidth:Q,maxHeight:z,downsamplingRatio:.2,pixelRatio:window.devicePixelRatio,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",canvas:!0});N(t),x(e),function(e){var t,n;e.width/window.devicePixelRatio<window.innerWidth&&(t=(window.innerWidth-e.width/window.devicePixelRatio)/2),e.height/window.devicePixelRatio<window.innerHeight&&(n=(window.innerHeight-e.height/window.devicePixelRatio)/2),de({x:t,y:n}),te({x:t,y:n,width:null,height:null})}(t),t.style&&t.style.height&&t.style.width?(fe(parseInt(t.style.height,10)),pe(parseInt(t.style.width,10))):t.style&&t.style.height?(fe(parseInt(t.style.height,10)),pe(t.width)):t.style&&t.style.width?(fe(t.height),pe(parseInt(t.style.width,10))):(fe(t.height),pe(t.width))}),{orientation:!0})},xe=function(){q(!1),D(!0)};return!1===window.matchMedia("(orientation: ".concat(ae," )"))&&be(),o.a.createElement("div",{className:c.outerContainer},o.a.createElement("div",{className:ye?c.stageContainerAfterUpload:c.stageContainerBeforeUpload},o.a.createElement(g.Stage,{visible:ye,ref:h,width:Q,height:z},o.a.createElement(g.Layer,{onClick:function(){q(!1)},onTap:function(){q(!1)}},o.a.createElement(g.Image,{width:ue,height:we,x:ee?ce.x:0,y:ee?ce.y:0,image:H})),o.a.createElement(g.Layer,{visible:ye},o.a.createElement(P,{backgroundImage:H,data:d,shapeProps:ee,isSelected:T,onSelect:function(){q(!0)},onChange:te})))),o.a.createElement(S.BrowserView,{viewClassName:ye?c.browserViewAfterUpload:c.browserViewBeforeUpload},o.a.createElement("div",{className:ye?c.singleButtonContainerAfterUpload:c.singleButtonContainerBeforeUpload},o.a.createElement("label",{className:ye?c.buttonAfterUpload:c.buttonBeforeUpload,htmlFor:"files"},"Bild hochladen",o.a.createElement("input",{id:"files",visibility:"hidden",type:"file",accept:"image/*",style:{display:"none"},onChange:ve}))),o.a.createElement("div",{style:ye?null:{display:"none"},className:c.singleButtonContainerAfterUpload},o.a.createElement("label",{className:c.buttonAfterUpload,onClick:xe},"Bild Speichern"))),o.a.createElement(S.MobileView,{viewClassName:ye?c.mobileViewAfterUpload:c.mobileViewBeforeUpload,style:{bottom:(window.innerHeight-we)/4-35}},ye?o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"files"},o.a.createElement("img",{src:U.a,style:{height:"45px",width:"45px"}}),o.a.createElement("input",{id:"files",visibility:"hidden",type:"file",accept:"image/*",style:{display:"none"},onChange:ve}))):o.a.createElement("div",{className:ye?c.hidden:c.singleButtonContainerBeforeUpload},o.a.createElement("label",{className:ye?c.buttonAfterUpload:c.buttonBeforeUpload,htmlFor:"files"},"Bild hochladen",o.a.createElement("input",{id:"files",visibility:"hidden",type:"file",accept:"image/*",style:{display:"none"},onChange:ve}))),o.a.createElement("div",{style:ye?null:{display:"none"},className:c.singleButtonContainerAfterUploadMobile},o.a.createElement("label",{className:c.buttonAfterUpload,onClick:xe},"Bild Speichern")),o.a.createElement("div",{style:ye?null:{display:"none"}},o.a.createElement("form",{action:d&&d.node?"".concat("https://ecoled-pcode.myshopify.com/","cart/add"):"https://ecoled-pcode.myshopify.com/"},o.a.createElement("input",{type:"hidden",name:"id",value:a||""}),o.a.createElement("button",{type:"submit",style:{border:"none",background:"transparent"}},o.a.createElement("img",{src:j.a,style:{height:"45px",width:"45px"}}))))),o.a.createElement(S.MobileView,{viewClassName:c.backButton,style:ye?null:{display:"none"}},o.a.createElement("form",{action:d&&d.node?d.node.onlineStoreUrl:"https://ecoled-pcode.myshopify.com/"},o.a.createElement("button",{style:{border:"none",background:"white"},type:"submit"},o.a.createElement("img",{src:C.a,style:{position:"absolute",height:"50px",width:"50px"}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=n(19),V=n(64),W=n(65),T=n(66),q=n(14),M=new W.a;console.log("https://ecoled-pcode.myshopify.com/api/graphql");var F=new T.a({uri:"https://ecoled-pcode.myshopify.com/api/graphql"}),L=Object(V.a)((function(){return{headers:{"X-Shopify-Storefront-Access-Token":"76395c75a69f934117b8da81ff64f784"}}})),D=new N.a({link:L.concat(F),cache:M});r.a.render(o.a.createElement(q.a,{client:D},o.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,n){e.exports=n.p+"static/media/cart-arrow-down.a1da4642.svg"},58:function(e,t,n){e.exports=n.p+"static/media/long-arrow-left.5bf916de.svg"},59:function(e,t,n){e.exports=n.p+"static/media/upload-image.3e046b57.svg"},67:function(e,t,n){e.exports=n(132)},72:function(e,t,n){}},[[67,1,2]]]);
//# sourceMappingURL=main.41ad0328.chunk.js.map